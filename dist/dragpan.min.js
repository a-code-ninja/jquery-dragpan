/*! Dragpan - v1.0.1 - 2013-08-23
* https://github.com/lgoldstien/jquery-dragpan
* Copyright (c) 2013 Lawrence Goldstien; Licensed MIT */
$.widget("oml.dragpan",{_defaults:{speedX:10,speedY:10,cursor:"all-scroll",on:!0},vars:{},_create:function(){_this=this,_this._defaults.$parent=$(_this.element),_this.options="undefined"==typeof _this.options?_this._defaults:$.extend(_this._defaults,_this.options),"object"==typeof _this.options.parent&&(_this.options.$parent=_this.options.parent),_this.vars.$parent=_this.options.$parent,_this.vars.$child=_this.vars.$parent.children(),_this.vars.maxX=_this.vars.$child.prop("scrollWidth"),_this.vars.maxY=_this.vars.$child.prop("scrollHeight"),_this.vars.posX=_this.vars.$parent.scrollLeft(),_this.vars.posY=_this.vars.$parent.scrollTop(),_this.vars.lastPosX=0,_this.vars.lastPosY=0,_this.vars.state="off",_this.vars.selection=!1,"none"!==_this.vars.$parent.css("-webkit-touch-callout")&&(_this.vars.selection=!0),"none"!==_this.vars.$parent.css("-webkit-user-select")&&(_this.vars.selection=!0),"none"!==_this.vars.$parent.css("-khtml-user-select")&&(_this.vars.selection=!0),"none"!==_this.vars.$parent.css("-moz-user-select")&&(_this.vars.selection=!0),"none"!==_this.vars.$parent.css("-ms-user-select")&&(_this.vars.selection=!0),"none"!==_this.vars.$parent.css("user-select")&&(_this.vars.selection=!0),_this.vars.$parent.scroll(function(){_this.vars.posX=_this.vars.$parent.scrollLeft(),_this.vars.posY=_this.vars.$parent.scrollTop()}),_this.options.on===!0&&this.on()},_dragging:function(a){"on"===a?_this.vars.$parent.mousemove(function(a){var b=(_this.vars.lastPosX-a.clientX)*(_this.options.speedX/10),c=(_this.vars.lastPosY-a.clientY)*(_this.options.speedY/10);_this._updateScrollPosition(b,c,!0),_this.vars.lastPosX=a.clientX,_this.vars.lastPosY=a.clientY}):_this.vars.$parent.off("mousemove")},_updateScrollPosition:function(a,b,c){c===!0?(_this.vars.$parent.scrollLeft(_this.vars.posX+a),_this.vars.$parent.scrollTop(_this.vars.posY+b)):(_this.vars.$parent.scrollLeft(a),_this.vars.$parent.scrollTop(b))},_addMouseBinding:function(){_this.vars.$parent.mousedown(function(a){_this.vars.lastPosX=a.clientX,_this.vars.lastPosY=a.clientY,_this._dragging("on")}),_this.vars.$parent.mouseup(function(){_this._dragging("off")}),_this.vars.$parent.mouseleave(function(){_this._dragging("off")})},_removeMouseBinding:function(){_this.vars.$parent.off("mousemove"),_this.vars.$parent.off("mousedown"),_this.vars.$parent.off("mouseup"),_this.vars.$parent.off("mouseleave"),_this._dragging("off")},_state:function(){return _this.vars.state},on:function(){"off"===this._state()&&(_this.options.$parent.css("cursor",_this.options.cursor),_this.vars.$parent.css("-webkit-touch-callout","none"),_this.vars.$parent.css("-webkit-user-select","none"),_this.vars.$parent.css("-khtml-user-select","none"),_this.vars.$parent.css("-moz-user-select","-moz-none"),_this.vars.$parent.css("-ms-user-select","none"),_this.vars.$parent.css("user-select","none"),this._addMouseBinding(),_this.vars.state="on")},off:function(){"on"===this._state()&&(_this.vars.selection===!0&&(_this.vars.$parent.css("-webkit-touch-callout","all"),_this.vars.$parent.css("-webkit-user-select","all"),_this.vars.$parent.css("-khtml-user-select","all"),_this.vars.$parent.css("-moz-user-select","all"),_this.vars.$parent.css("-ms-user-select","all"),_this.vars.$parent.css("user-select","all")),_this.options.$parent.css("cursor","default"),this._removeMouseBinding(),_this.vars.state="off")}});